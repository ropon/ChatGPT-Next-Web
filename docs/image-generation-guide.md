# 图片生成功能使用指南

NextChat 现在支持多种AI模型的图片生成功能，包括 OpenAI DALL-E 3、ChatGLM CogView 系列和 Google Gemini 图片生成模型。

## 支持的模型

### 🎨 DALL-E 3 (OpenAI)
- **特点**: 最高质量，精确控制，多种风格
- **尺寸**: 1024x1024, 1792x1024, 1024x1792
- **质量**: standard, hd
- **风格**: vivid, natural
- **适用场景**: 专业级图片生成，艺术创作

### 🧠 CogView-3 Plus/CogView-3 (ChatGLM)
- **特点**: 中文友好，快速生成，多样化风格
- **尺寸**: 1024x1024, 768x1344, 1344x768
- **适用场景**: 中文内容创作，快速原型设计

### 🌟 Gemini 2.0 Flash Image (Google)
- **特点**: 实验性功能，多模态，创新风格
- **尺寸**: 1024x1024
- **适用场景**: 实验性创作，多模态内容生成

### 🚀 Grok-2 Image (xAI)
- **特点**: 基于Grok-2技术，高质量生成，快速响应
- **尺寸**: 1024x1024, 1792x1024, 1024x1792
- **格式**: JPEG
- **适用场景**: 创新AI图片生成，营销内容，社交媒体

## 功能特性

### 1. 智能模型检测和切换
系统会自动检测用户输入中的图片生成关键词，并：
- 检查当前模型是否支持图片生成
- 自动推荐并切换到合适的图片生成模型
- 显示模型切换和优化提示信息

### 2. 多语言关键词支持
**中文关键词：**
- 生成图片、画一张、画个、生成一张图
- 帮我画、创建图片、制作图片、绘制
- 画出、生成图像、创作图片、设计图片

**英文关键词：**
- generate image、create image、draw、make image
- paint、generate picture、create picture

### 3. 智能图片生成助手
点击聊天输入框旁的"生成图片"按钮，可以：
- 选择图片生成模型
- 查看模型特性和能力
- 选择预设的图片风格模板
- 浏览不同类别的提示词
- 输入自定义提示词

## 使用方法

### 方法一：直接输入
在聊天中直接输入包含图片生成关键词的消息：

```
生成图片：一只可爱的小猫在花园里玩耍
画一张赛博朋克风格的城市夜景
create image: a beautiful sunset over the ocean
```

系统会自动检测意图并切换到合适的图片生成模型。

### 方法二：使用图片生成按钮
1. 点击聊天输入框旁的"生成图片"按钮
2. 在弹出的图片生成助手中：
   - 选择图片生成模型（DALL-E 3、CogView-3等）
   - 选择风格分类（人像、动漫、艺术、风景等）
   - 选择预设模板或输入自定义提示词
3. 点击确认生成图片

### 方法三：手动切换模型
1. 在聊天界面点击模型选择器
2. 选择支持图片生成的模型：
   - dall-e-3
   - cogview-3-plus
   - cogview-3
   - gemini-2.0-flash-exp-image-generation
   - grok-2-image-1212
3. 直接输入图片描述

## 模型特定配置

### DALL-E 3 参数
当使用 DALL-E 3 模型时，可以配置以下参数：

#### 图片尺寸
- 1024x1024（正方形）
- 1792x1024（横向）
- 1024x1792（纵向）

#### 图片质量
- standard（标准质量）
- hd（高清质量）

#### 图片风格
- vivid（生动风格）
- natural（自然风格）

### CogView 系列参数
#### 图片尺寸
- 1024x1024（正方形）
- 768x1344（竖向）
- 1344x768（横向）

### Grok 图片生成参数
#### 图片尺寸
- 1024x1024（正方形）
- 1792x1024（横向）
- 1024x1792（纵向）

#### 输出格式
- JPEG（默认）

#### 特殊功能
- 自动提示词优化（由Grok聊天模型处理）
- 支持批量生成（最多10张/请求）

## 提示词优化建议

### 1. 描述要具体
❌ 不好：画一只猫
✅ 好：一只橙色的波斯猫坐在阳光明媚的窗台上

### 2. 包含风格信息
- 艺术风格：油画风格、水彩画、素描、动漫风格
- 摄影风格：专业摄影、工作室灯光、自然光
- 技术参数：高分辨率、8K、专业品质

### 3. 添加环境描述
- 背景：花园、城市、海滩、室内
- 光线：日出、黄昏、霓虹灯、柔和光线
- 氛围：温馨、神秘、未来感、复古

## 预设模板分类

### 人像 👤
- 写实人像：专业摄影风格的人物肖像
- 艺术人像：各种艺术风格的人物画

### 动漫 🎨
- 日式动漫风格
- 卡通插画风格

### 艺术 🖼️
- 油画风格
- 水彩画风格
- 抽象艺术

### 风景 🏞️
- 自然风光
- 奇幻风景
- 城市景观

### 科幻 🚀
- 赛博朋克风格
- 未来科技
- 太空场景

### 室内 🏠
- 温馨家居
- 现代设计
- 复古装饰

### 设计 ✨
- Logo设计
- 产品概念
- 海报设计

## 注意事项

1. **API 费用**：图片生成会消耗 OpenAI API 额度
2. **生成时间**：图片生成通常需要 10-30 秒
3. **内容政策**：请遵守 OpenAI 的内容使用政策
4. **图片保存**：生成的图片会自动保存到聊天记录中

## 故障排除

### 图片生成失败
- 检查 OpenAI API 密钥是否正确配置
- 确认账户有足够的 API 额度
- 检查提示词是否符合内容政策

### 模型切换失败
- 确认 DALL-E 3 模型在可用模型列表中
- 检查网络连接是否正常

### 图片显示问题
- 刷新页面重试
- 检查浏览器是否支持图片显示
- 清除浏览器缓存

## 技术实现

本功能基于以下技术实现：
- **OpenAI DALL-E 3 API** (`/v1/images/generations`)
- **ChatGLM CogView API** (`/api/paas/v4/images/generations`)
- **Google Gemini 图片生成 API**
- **xAI Grok 图片生成 API** (`/v1/images/generations`)
- 智能关键词检测和模型选择
- 自动提示词优化
- 多模型统一的图片缓存和显示系统

### 支持的API端点
- OpenAI: `/v1/images/generations`
- ChatGLM: `/api/paas/v4/images/generations`
- Azure OpenAI: `/deployments/{deployment}/images/generations`
- xAI: `/v1/images/generations`

更多技术细节请参考项目源代码。